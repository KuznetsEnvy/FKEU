{% comment %}ly_global_begin{% endcomment %}{% include 'ly-global' %}{% comment %}ly_global_end{% endcomment %}{% capture url %}{% if collection %}{{ product.url }}{% else %}{{ product.url }}{% endif %}{% endcapture %}
{% assign mod6 = forloop.index | modulo: 6 %}
{% assign mod4 = forloop.index | modulo: 4 %}
{% assign mod3 = forloop.index | modulo: 3 %}
{% assign mod2 = forloop.index | modulo: 2 %}

{% capture max_cols %}{% if template contains 'index' %}{% comment %}ly_new_settings_replace_for_[ settings.homepage_products_per_row ]_begin{% endcomment %}{% if request.host %}{% assign host = request.host %}{% assign domains = shop.metafields.language_domains %}{% for domain in domains %}{% assign key = domain | first %}{% assign value = domain | last | split: ',' %}{% if value contains host %}{% assign language = key %}{% endif %}{% endfor %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% else %}{% assign language = cart.attributes["language"] %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% endif %}{% assign namespace = language | append: "as" %}{% if shop.metafields[namespace]["id4456836"] %}{% assign ly_translation = shop.metafields[namespace]["id4456836"] %}{% else %}{% assign ly_translation = settings.homepage_products_per_row %}{% endif %}{{ ly_translation }}{% comment %}ly_new_settings_replace_end{% endcomment %}{% else %}{% comment %}ly_new_settings_replace_for_[ settings.products_per_row ]_begin{% endcomment %}{% if request.host %}{% assign host = request.host %}{% assign domains = shop.metafields.language_domains %}{% for domain in domains %}{% assign key = domain | first %}{% assign value = domain | last | split: ',' %}{% if value contains host %}{% assign language = key %}{% endif %}{% endfor %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% else %}{% assign language = cart.attributes["language"] %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% endif %}{% assign namespace = language | append: "as" %}{% if shop.metafields[namespace]["id4456837"] %}{% assign ly_translation = shop.metafields[namespace]["id4456837"] %}{% else %}{% assign ly_translation = settings.products_per_row %}{% endif %}{{ ly_translation }}{% comment %}ly_new_settings_replace_end{% endcomment %}{% endif %}{% endcapture %}

<div class="product-block {% if settings.label_soldout_show and product.available == false %}sold-out {% endif %}{{ product-block | default: 'flex column' }} max-cols-{{ max_cols }} min-cols-{{ settings.mobile_products_per_row }} {% if mod2 == 1 %} nth-2{% endif %}{% if mod3 == 1 %} nth-3{% endif %}{% if mod4 == 1 %} nth-4{% endif %}{% if mod6 == 1 %} nth-6{% endif %}">
  <div class="product-grid-item-inside">
    <div class="image">
      <div class="inner">


        <a class="hover" href="{{ product.url }}"><img src="{{ product.featured_image | product_img_url: 'grande' | split:'?' | first }}"/>
        </a>
        <a class="none-hover" href="{{ product.url }}"><img src="{{ product.images.last | product_img_url: 'large' | split:'?' | first }} "/></a>

        {% if settings.prod_quick_buy_show %}
          <div class="quick-buy-wrap pos-{{ settings.prod_quick_buy_pos }}">
            <a class="quick-buy {% if settings.prod_quick_buy_pos == 'middle' %}giant{% else %}big{% endif %}-round-button" href="#">{% comment %}ly_i18n_replace_for_[ 'products.general.quick_buy_html' | t ]_begin{% endcomment %}{% capture ly_template %}{{ 'products.general.quick_buy_html' | t }}{% endcapture %}{% include 'ly-static-string' with '4456839' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}</a>
          </div>
        {% endif %}
      </div>

      {% include 'product-label' %}
    </div>


    <div class="{% if settings.prod_block_layout contains 'beside' %}ft ftw{% endif %}{% if settings.prod_block_layout == 'beside-exceptmobile' %} ft-nm{% endif %}">
      <div class="ftr">
        <a class="title ftc" href="{{ url }}">
          {% include 'ly-title' with product %}
          {% if ly_translation contains 'Aaron Kai' %}
            {% assign title = ly_translation | split: ' ' %}
            {% assign s =  title | size %}
            <span class="bold">
            <ly-as-4456838>Aaron Kai</ly-as-4456838>
          </span>
            {% for i in (2..s) %}
              {{ title[i] }}
            {% endfor %}
          {% else %}
            {% assign title = ly_translation | split: ' ' %}
            {% assign s =  title | size %}
            <span class="bold">
            {{ title[0] }}
          </span>
            {% for i in (1..s) %}
              {{ title[i] }}
            {% endfor %}
          {% endif %}
        </a>

        <div class="price-wrap">
          {% assign has_eu_variant = false %}
          {% for variant in product.variants %}
            {% if variant.title == 'eu' %}
              {% assign has_eu_variant = true %}
              <div class="price ftc price-eu hide">
                <span class="amount">{{ variant.price | money }}</span>
              </div>
            {% endif %}
          {% endfor %}
          <div class="price ftc price-intl {% if false and product.compare_at_price_max > product.price %}on-sale{% endif %}">
            {% if false and product.price_varies %}
              <span class="from">{% comment %}ly_i18n_replace_for_[ 'products.general.from' | t ]_begin{% endcomment %}{% capture ly_template %}{{ 'products.general.from' | t }}{% endcapture %}{% include 'ly-static-string' with '4456840' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template | escape}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}</span>
            {% endif %}
            <span class="amount">{% assign geolizr_price =  product.price %}{% include 'geolizr-currency' with geolizr_price %}{{ product.price | money | prepend: geolizr_prepend_code | append: geolizr_append_code }}</span>
            {% if product.compare_at_price_max > product.price %}
              <del>{% assign geolizr_price =  product.compare_at_price %}{% include 'geolizr-currency' with geolizr_price %}{{ product.compare_at_price | money | prepend: geolizr_prepend_code | append: geolizr_append_code }}</del>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="cart-btn-home">
    {% if product.available %}
      <div class="debug">
        <div class="variants">{{ product.variants | json }}</div>
      </div>
      <div class="product-form-wrap">
        {% for variant in product.variants %}
          {% if variant.title == 'eu' %}
            <form class="product-form product-form-eu hide" id="product-form" action="/cart/add" method="post" enctype="multipart/form-data" data-product-id="{{ product.id }}">
              <input type="hidden" value="{{ variant.id }}" id="product-select" name="id" class="hidden" />
              <input type="hidden" name="quantity" value="1" />
              <button name="add" class="add-to-cart buy-now button button--black-gradient cart-btn cart-btn-desktop" id="add">{{ 'products.product.add_to_cart_html' | t }}</button>
            </form>
          {% endif %}
        {% endfor %}
        <form class="product-form product-form-intl" id="product-form" action="/cart/add" method="post" enctype="multipart/form-data" data-product-id="{{ product.id }}">
          <input type="hidden" value="{{ product.first_available_variant.id }}" id="product-select" name="id" class="hidden">
          <input type="hidden" name="quantity" value="1"/>
          <button name="add" class="add-to-cart buy-now button button--black-gradient cart-btn cart-btn-desktop" id="add">{% comment %}ly_i18n_replace_for_[ 'products.product.add_to_cart_html' | t ]_begin{% endcomment %}{% capture ly_template %}{{ 'products.product.add_to_cart_html' | t }}{% endcapture %}{% include 'ly-static-string' with '4456841' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}</button>
        </form>
      </div>
    {% else %}
      <a href="https://form.jotform.me/70724374625458" id="various1" style="text-align:center" class="add-to-cart buy-now button button--black-gradient cart-btn cart-btn-desktop unavailable"> {% comment %}ly_i18n_replace_for_['products.product.product_unavailable_html' | t ]_begin{% endcomment %}{% capture ly_template %}{{'products.product.product_unavailable_html' | t }}{% endcapture %}{% include 'ly-static-string' with '4456842' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}</a>
      {% comment %}
      <button disabled="disabled" class="add-to-cart buy-now button button--black-gradient cart-btn cart-btn-desktop unavailable">{% comment %}ly_i18n_replace_for_[ 'products.product.product_unavailable_html' | t ]_begin{% endcomment %}{% capture ly_template %}{{ 'products.product.product_unavailable_html' | t }}{% endcapture %}{% include 'ly-static-string' with '4456843' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}</button>
      {% endcomment %}
    {% endif %}
  </div>

  <span class="shopify-product-reviews-badge" data-id="{{ product.id }}"></span>

  <script id="product-block-json-{{ product.id }}" type="text/template">products.id{{ product.id }} = {{ product | json }};</script>
  {% assign featured_image = product.selected_or_first_available_variant.featured_image | default: product.featured_image %}
  {% if settings.prod_quick_buy_show %}
    <script id="product-block-template-{{ product.id }}" type="text/template">
      <div class="quickbuy-form">
        <div class="row">
          <div class="product-gallery half column">
            <div class="main">
              <div class="main-img-link" href="{{ featured_image | img_url: 'master' }}" title="{{ featured_image.alt | escape }}">
                <img class="main-img" src="{{ featured_image | img_url: 'grande' }}" alt="{{ featured_image.alt | escape }}"/>
              </div>
            </div>

            {% if product.images.size > 1 %}
              <div class="thumbnails">
                {% for image in product.images %}
                  <a class="thumbnail" title="{{ image.alt | escape }}" href="{{ image | product_img_url: 'master' }}" data-src="{{ image | product_img_url: 'grande' }}">
                    {{ image | img_url: 'small' | img_tag: image.alt }}
                  </a>
                {% endfor %}
              </div>
            {% endif %}
          </div>
          <div class="half column product-details">
            <div class="border-bottom section padless-top cf product-title-row">
              {% if settings.prod_show_brand or settings.prod_show_type %}
                <div class="brand-and-type feature-col">
                  {% if settings.prod_show_brand %}
                    {% comment %}
                    Do we have a collection that has the same name as our product vendor name?
                    If we do, let's have the vendor link point to it.
                    If not, we will point to the automatic vendor collection.
                    {% endcomment %}
                    {% assign product_vendor_handle = product.vendor | handle %}
                    {% if collections[product_vendor_handle].handle == product_vendor_handle %}
                      {% assign vendor_url = collections[product_vendor_handle].url %}
                    {% else %}
                      {% assign vendor_url = product.vendor | url_for_vendor %}
                    {% endif %}
                    <span class="brand" itemprop="brand">{% comment %}ly_code_replace_for_[ product.vendor | link_to: vendor_url ]_begin{% endcomment %}{% include 'ly-vendor' with product %}{{ ly_translation | link_to: vendor_url }}{% comment %}ly_code_replace_end{% endcomment %}</span>
                  {% endif %}

                  {% if settings.prod_show_type and product.type != blank %}
                    {% if settings.prod_show_brand %}/{% endif %}

                    {% assign product_type_handle = product.type | handle %}
                    {% if collections[product_type_handle].handle == product_type_handle %}
                      {% assign type_url = collections[product_type_handle].url %}
                    {% else %}
                      {% assign type_url = product.type | url_for_type %}
                    {% endif %}
                    <span class="type">{% comment %}ly_code_replace_for_[ product.type | link_to: type_url ]_begin{% endcomment %}{% include 'ly-type' with product %}{{ ly_translation | link_to: type_url }}{% comment %}ly_code_replace_end{% endcomment %}</span>
                  {% endif %}
                </div>
              {% endif %}

              <h1 class="product-title">
                <span>{% comment %}ly_code_replace_for_[ product.title | split:' ' | first]_begin{% endcomment %}{% include 'ly-title' with product %}{{ ly_translation | split:' ' | first}}{% comment %}ly_code_replace_end{% endcomment %} </span>{% comment %}ly_code_replace_for_[ product.title | split:' ' | last]_begin{% endcomment %}{% include 'ly-title' with product %}{{ ly_translation | split:' ' | last}}{% comment %}ly_code_replace_end{% endcomment %}
              </h1>

              <div id="price" class="product-price {% if product.variants.size == 1 and product.compare_at_price_max > product.price %}on-sale{% endif %}">
                {% if product.variants.size == 1 and product.compare_at_price_max > product.price %}
                  <del>{% assign geolizr_price =  product.compare_at_price %}{% include 'geolizr-currency' with geolizr_price %}{{ product.compare_at_price | money | prepend: geolizr_prepend_code | append: geolizr_append_code }}</del>
                {% endif %}
                {% assign geolizr_price =  product.price %}{% include 'geolizr-currency' with geolizr_price %}{{ product.price | money | prepend: geolizr_prepend_code | append: geolizr_append_code }}
              </div>

              {% include 'sharing' with product %}
            </div>

            <div class="section border-bottom">
              {% if settings.prod_show_sku and product.variants.first.sku != blank %}
                <div class="space-under sku-row">{% comment %}ly_i18n_replace_for_[ 'products.product.sku' | t ]_begin{% endcomment %}{% capture ly_template %}{{ 'products.product.sku' | t }}{% endcapture %}{% include 'ly-static-string' with '4456844' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template | escape}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}
                  <span id="sku">{{ product.variants.first.sku }}</span></div>
              {% endif %}

              {% if product.available %}
                <form class="product-form" id="product-form" action="/cart/add" method="post" enctype="multipart/form-data" data-product-id="{{ product.id }}">
                  {% assign hide_default_title = false %}
                  {% if product.variants.size == 1 %}
                    {% if product.variants.first.title contains 'Default' %}
                      {% assign hide_default_title = true %}
                    {% endif %}
                    {% unless settings.prod_singlevar_mode contains 'drop' %}
                    {% assign hide_default_title = true %}
                    {% endunless %}
                  {% endif %}

                  {% unless product.variants.size != 1 or product.variants.first.title contains 'Default' %}
                  {% if settings.prod_singlevar_mode contains 'text' %}
                    <div class="variant-info">
                      {% for option in product.options %}
                        {% assign option_key = 'option' | append: forloop.index %}
                        <span class="option">{% if settings.prod_singlevar_mode contains 'withlabel' %}
                        <span class="label">{{ option }}:</span>{% endif %} {{ product.variants.first[option_key] }}
                        </span>{% unless forloop.last %},{% endunless %}
                      {% endfor %}
                    </div>
                  {% endif %}
                  {% endunless %}

                  {% if product.variants.size > 1 %}
                    <div id="product-variants" class="{% if hide_default_title %} hidden{% endif %}">
                      <select id="product-select" name="id" class="hidden">
                        {% for variant in product.variants %}
                          <option {% if variant == product.selected_or_first_available_variant %} selected="selected" {% endif %} value="{{ variant.id }}">{% comment %}ly_code_replace_for_[ variant.title ]_begin{% endcomment %}{% include 'ly-title' with variant %}{{ ly_translation }}{% comment %}ly_code_replace_end{% endcomment %} - {% assign geolizr_price =  variant.price %}{% include 'geolizr-currency' with geolizr_price %}{{ variant.price | money | prepend: geolizr_prepend_code | append: geolizr_append_code }}</option>
                        {% endfor %}
                      </select>
                    </div>
                  {% else %}
                    <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}"/>
                  {% endif %}

                  {% if settings.prod_show_quantity_input %}
                    <div class="quantity">
                      <label for="quantity">{% comment %}ly_i18n_replace_for_[ 'products.product.quantity' | t ]_begin{% endcomment %}{% capture ly_template %}{{ 'products.product.quantity' | t }}{% endcapture %}{% include 'ly-static-string' with '4456845' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template | escape}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}</label>
                      <input class="select-on-focus" type="text" size="3" id="quantity" name="quantity" value="1"/>
                    </div>
                  {% else %}
                    <input type="hidden" name="quantity" value="1"/>
                  {% endif %}

                  <button name="add" class="buy-now" id="add">{% comment %}ly_i18n_replace_for_[ 'products.product.add_to_cart_html' | t ]_begin{% endcomment %}{% capture ly_template %}{{ 'products.product.add_to_cart_html' | t }}{% endcapture %}{% include 'ly-static-string' with '4456841' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}</button>

                  <div id="backorder" class="hidden">
                    <p>
                      <span id="selected-variant"></span> {% comment %}ly_i18n_replace_for_[ 'products.product.backorder' | t ]_begin{% endcomment %}{% capture ly_template %}{{ 'products.product.backorder' | t }}{% endcapture %}{% include 'ly-static-string' with '4456846' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template | escape}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}
                    </p>
                  </div>
                </form>
              {% else %}
                <div class="rte">
                  {% comment %}ly_i18n_replace_for_[ 'products.product.product_unavailable_html' | t ]_begin{% endcomment %}{% capture ly_template %}{{ 'products.product.product_unavailable_html' | t }}{% endcapture %}{% include 'ly-static-string' with '4456843' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}
                </div>
              {% endif %}
            </div>

            <div>
              <a class="more-link" href="{{ url }}">{% comment %}ly_i18n_replace_for_[ 'products.general.full_details' | t ]_begin{% endcomment %}{% capture ly_template %}{{ 'products.general.full_details' | t }}{% endcapture %}{% include 'ly-static-string' with '4456847' %}{% if ly_translation %}{% assign escape_content = true %}{% assign ly_template = ly_translation %}{% else %}{% assign escape_content = false %}{% endif %}{% if escape_content %}{{ ly_template | escape}}{% else %}{{ ly_template }}{% endif %}{% comment %}ly_i18n_replace_end{% endcomment %}</a>
            </div>
          </div>
        </div>
      </div>
    </script>
  {% endif %}
</div>